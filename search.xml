<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hexo编辑Markdown的问题及解决方案</title>
      <link href="/2025/05/16/hexo-with-markdown/"/>
      <url>/2025/05/16/hexo-with-markdown/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>使用Hexo框架，编写Markdown时遇到了一些坑，现将解决方案记录在此以备查阅。</p><h2 id="Markdown公式无法渲染"><a href="#Markdown公式无法渲染" class="headerlink" title="Markdown公式无法渲染"></a>Markdown公式无法渲染</h2><p>由于Katex还未能支持公式编号引用<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="见讨论 [https://github.com/KaTeX/KaTeX/discussions/3708](https://github.com/KaTeX/KaTeX/discussions/3708)">[1]</span></a></sup><sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="见讨论 [https://github.com/KaTeX/KaTeX/issues/2798](https://github.com/KaTeX/KaTeX/issues/2798)">[2]</span></a></sup><sup id="fnref:3"><a href="#fn:3" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="见讨论 [https://github.com/KaTeX/KaTeX/issues/2003](https://github.com/KaTeX/KaTeX/issues/2003)">[3]</span></a></sup>，本站使用了mathjax解析器。Markdown公式有时无法渲染带下标的公式，例如<code>E_&#123;mn&#125;</code>，也无法识别公式内的换行符号<code>\\</code>。</p><p>参考 <a href="https://www.jianshu.com/p/7ab21c7f0674">在Hexo中渲染MathJax数学公式</a> 中的方案可解决。</p><p>步骤如下：</p><ul><li><p>第一步：将Hexo原有的markdown渲染器marked换成kramed</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure></li><li><p>第二步：修改kramed转义规则</p><p>找到文件 <code>node_modules\kramed\lib\rules\inline.js</code>修改第11行的<code>escape</code>变量值，取消对<code>\,&#123;,&#125;</code>对转义：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  escape: /^\\([\\`*&#123;&#125;\[\]()#$+\-.!_&gt;])/,</span></span><br><span class="line"><span class="attr">escape</span>: <span class="regexp">/^\\([`*\[\]()#$+\-.!_&gt;])/</span></span><br></pre></td></tr></table></figure><p>修改第20行<code>em</code>变量：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  em: /^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,</span></span><br><span class="line"><span class="attr">em</span>: <span class="regexp">/^\*((?:\*\*|[\s\S])+?)\*(?!\*)/</span></span><br></pre></td></tr></table></figure></li></ul><p>记得执行<code>hexo clean</code>清空缓存，重新生成网页，查看是否渲染成功。</p><h2 id="Markdown代码换行渲染结果也换行的问题"><a href="#Markdown代码换行渲染结果也换行的问题" class="headerlink" title="Markdown代码换行渲染结果也换行的问题"></a>Markdown代码换行渲染结果也换行的问题</h2><p>问题：在markdown代码中换行，渲染结果也跟着换行。这不符合通常markdown的规则。通常在markdown代码中换行，是不会渲染出换行的。否则如果要写很长的一段文本，就必须写在同一行中，不方便编辑维护。</p><p>关于这个问题搜到一个解决方案<sup id="fnref:4"><a href="#fn:4" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[https://github.com/iissnan/hexo-theme-next/issues/1672](https://github.com/iissnan/hexo-theme-next/issues/1672)">[4]</span></a></sup>。链接里的方法是针对使用了<code>hexo-renderer-marked</code>解析器的情况。在我的配置中使用的是<code>kramed</code>解析器，对链接中的配置方案稍作修改：即在hexo配置文件<code>_config.yaml</code>中，加入一下配置代码：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kramed:</span></span><br><span class="line">  <span class="attr">gfm:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">pedantic:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">sanitize:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">tables:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">breaks:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">smartLists:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">smartypants:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">modifyAnchors:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">autolink:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>重新生成网页 <code>hexo clean &amp;&amp; hexo serve</code>，刷新网页即可看到回车问题已修复。</p><h3 id="markdown中中文句子换行，渲染结果出现多余空格"><a href="#markdown中中文句子换行，渲染结果出现多余空格" class="headerlink" title="markdown中中文句子换行，渲染结果出现多余空格"></a>markdown中中文句子换行，渲染结果出现多余空格</h3><p>还剩下一个问题就是在写markdown时中文换行，渲染结果会多出一个空格。</p><p>例如</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">换行</span><br><span class="line">渲染出现空格</span><br></pre></td></tr></table></figure><p>渲染结果：</p><p><img src="/assets/img/post/hexo-with-markdown/render_result.png" width="200"  title="Fig: Result of markdown render"></p><p>这可能是为英文写作而设计的，换行前后的单词之间在渲染结果中插入空格来隔开两个单词，但在使用中文写作时，这个空格就多余了。目前没有找到很好的解决方案，暂时可以规避这一现象的方法就是只在标点符号后换行，因为标点符号后多出的空格在视觉上不明显。或者开启编辑器的自动换行(word wrap)功能，编写时一段文字都写在同一行中。</p><h2 id="Markdown使用带Tooptip的脚注"><a href="#Markdown使用带Tooptip的脚注" class="headerlink" title="Markdown使用带Tooptip的脚注"></a>Markdown使用带Tooptip的脚注</h2><p>安装插件<code>hexo-reference</code>，使用方式见 <a href="https://github.com/kchen0x/hexo-reference">hexo-reference github主页</a> </p><p>缺陷：但只支持使用数字作为引用label，且不能自动编号。</p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">见讨论 <a href="https://github.com/KaTeX/KaTeX/discussions/3708">https://github.com/KaTeX/KaTeX/discussions/3708</a><a href="#fnref:1" rev="footnote"> ↩</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">见讨论 <a href="https://github.com/KaTeX/KaTeX/issues/2798">https://github.com/KaTeX/KaTeX/issues/2798</a><a href="#fnref:2" rev="footnote"> ↩</a></span></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">见讨论 <a href="https://github.com/KaTeX/KaTeX/issues/2003">https://github.com/KaTeX/KaTeX/issues/2003</a><a href="#fnref:3" rev="footnote"> ↩</a></span></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://github.com/iissnan/hexo-theme-next/issues/1672">https://github.com/iissnan/hexo-theme-next/issues/1672</a><a href="#fnref:4" rev="footnote"> ↩</a></span></li></ol></div></div>]]></content>
      
      
      <categories>
          
          <category> 其他 </category>
          
          <category> 建站相关 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>从有限温度场论导出量子力学微扰论能级修正公式</title>
      <link href="/2025/05/15/physics-2025-05-15-perturbation/"/>
      <url>/2025/05/15/physics-2025-05-15-perturbation/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>新开通了主页，贴一篇以前写的文章充实一下网站内容&#129325;。</p><p>在这篇笔记中，我们将通过有限温度场论的方法推导出量子力学微扰论中的能量公式。（娱乐向，用大炮打蚊子。）</p><h2 id="微扰哈密顿量"><a href="#微扰哈密顿量" class="headerlink" title="微扰哈密顿量"></a>微扰哈密顿量</h2><p>微扰哈密顿量有如下形式</p><script type="math/tex; mode=display">\begin{align}    H=H_0+V \end{align}</script><p>假设 $H_0$ 是我们可以严格求解的部分，$V$ 是扰动项。</p><p>把 $H_0$ 的第 $n$ 能级本征态记作 $\{|n\rangle\}$，满足$H_0|n\rangle=E_n |n\rangle$.</p><h2 id="有限温度路径积分"><a href="#有限温度路径积分" class="headerlink" title="有限温度路径积分"></a>有限温度路径积分</h2><p>考虑一个无相互作用的费米子系统，每个费米子都由哈密顿量 $H$ 描述.可以写出相干态路径积分</p><script type="math/tex; mode=display">\begin{align}    \mathcal{Z}=\int \mathcal{D}\left[c^\dagger, c\right]e^{-S}\end{align}</script><p>其中作用量是</p><script type="math/tex; mode=display">\begin{align}    S=\int_0^{\beta} d\tau\left[\sum_n c^\dagger_n\left(\partial_\tau+E_n-\mu\right)c_n+\sum_{mn}c^\dagger_m V_{mn}c_n\right] \label{eq:action}\end{align}</script><p>这里 $c_n^\dagger\left(\tau\right)$，$c_n\left(\tau\right)$ 是相干态费米场， $V_{mn}\equiv\langle m|V|n\rangle$，$\mu$ 是化学势，$\beta=1/T$ 是温度的倒数。</p><div class="note info no-icon flat"><p><b>注: </b> <span class="remark_context">&nbsp;&nbsp;为什么用费米子系统而不用玻色子系统？因为费米子具有Pauli不相容的特性，在零温极限下，会各自占据一个能级，这样我们可以通过改变化学势来改变系统基态时的能级占据情况，方便从基态系统能量期望值求出各能级的能量特征值。</span></p></div><p>傅立叶变换到频域表象 $c_n(\tau)=\frac{1}{\beta}\sum_{m\in\mathbb{Z}} e^{-i\omega_m\tau}c_{n\omega_m}$, 频率 $\omega_m=\left(2m+1\right)\pi/\beta$, $m\in\mathbb{Z}$。 无势场 $V$ 时，松原格林函数是</p><script type="math/tex; mode=display">\begin{align}\mathcal{G}_m\left(\omega\right)=\frac{1}{-i\omega+E_n-\mu}\end{align}</script><h2 id="微扰论能级修正公式的推导"><a href="#微扰论能级修正公式的推导" class="headerlink" title="微扰论能级修正公式的推导"></a>微扰论能级修正公式的推导</h2><p>现在我们开始计算加上扰动 $V$ 后的能量期望值 $E=\left\langle\hat{H}\right\rangle$，这里的期望值 $\left\langle\cdot\right\rangle$ 指的是对应温度为$\frac{1}{\beta}$的平衡态系综平均值 <script type="math/tex">\left\langle\cdot\right\rangle=\text{Tr}\left[e^{-\beta\hat{H}}(\cdot)\right]</script>。</p><script type="math/tex; mode=display">\begin{align}    \left\langle\hat{H}\right\rangle = \sum_{mn}\left(E_{m}\delta_{mn}+V_{mn}\right)\left\langle c^\dagger_mc_n\right\rangle \label{eq:Hamiltonian_expect}\end{align}</script><p>$\left\langle c^\dagger_mc_n\right\rangle$ 可以由虚时序的松原格林函数得到</p><script type="math/tex; mode=display">\begin{align}    \left\langle c^\dagger_mc_n\right\rangle =\lim_{\tau\to0^+}\left\langle c^\dagger_m\left(\tau\right)c_n\left(0\right)\right\rangle \end{align}</script><p>做傅立叶变换得到</p><script type="math/tex; mode=display">\begin{align}    \left\langle c^\dagger_m c_n\right\rangle =\frac{1}{\beta}\sum_{\omega\omega'}e^{i\omega 0^+}\left\langle c^\dagger_{m\omega}c_{n\omega'}\right\rangle \end{align}</script><p>从这里开始使用简化符号 <script type="math/tex">\sum_{\omega} f (\omega)</script> 代替 $\sum_{m\in\mathbb{Z}}f(\omega_m)$，$\omega_m=(2m+1)\pi/\beta$</p><p>定义包含微扰后的格林函数为</p><!-- ![Green's function](/assets/img/post/2025-05-07-perturbation/G_definition.png){: .center  w="300"} --><p><img src="/assets/img/post/2025-05-07-perturbation/G_definition.png" width="300"  title="Fig: Feynman Diagram of Green's function"></p><p>则有</p><script type="math/tex; mode=display">\begin{align}    \left\langle c^\dagger_{m\omega}c_{n\omega'}\right\rangle =    -\delta_{\omega\omega'}G_{mn}\left(\omega\right)\end{align}</script><p>根据Dyson方程<img src="/assets/img/post/2025-05-07-perturbation/DysonEquation.png" alt="Fig: Dyson Equation"></p><script type="math/tex; mode=display">\begin{align}    G\left(\omega\right)=\mathcal{G}\left(\omega\right)-\mathcal{G}\left(\omega\right)VG\left(\omega\right)\end{align}</script><p>有</p><script type="math/tex; mode=display">    \begin{aligned}    G\left(\omega\right)&=\left(1+\mathcal{G}V\right)^{-1}\mathcal{G} \\    &=\sum_{k=0}^{+\infty}(-1)^k(\mathcal{G}V)^k\mathcal{G}    \end{aligned}</script><p>（也可由直接把式 \eqref{eq:action} 中费米场二次型的矩阵取逆得出该关系。）</p><p>代入式 \eqref{eq:Hamiltonian_expect},</p><script type="math/tex; mode=display">\begin{align}    \left\langle \hat{H}\right\rangle  &=    \sum_{mn}\left(E_m\delta_{mn}+V_{mn}\right)\frac{1}{\beta}\sum_\omega        e^{i\omega 0^+}\sum_{k=0}^{+\infty}(-1)^{k+1}\left[(\mathcal{G}V)^k\mathcal{G}\right]_{nm} \notag \\    &=\frac{1}{\beta}\sum_\omega    e^{i\omega 0^+}\sum_{k=0}^{+\infty}    \left\{    (-1)^{k+1}\text{Tr}\left[\left(E+V\right)(\mathcal{G}V)^k\mathcal{G}\right]    \right\} \label{eq:E_n_result}\end{align}</script><p>这里我们用了矩阵记号 <script type="math/tex">\left[ E \right]_{mn} = E_m \delta_{mn}</script>.</p><p>那么$n$ 阶微扰的能量有限温期望值 <script type="math/tex">\left\langle \hat{H}\right\rangle</script> 可由</p><script type="math/tex; mode=display">\begin{align}    \left\langle \hat{H}^{\left(n\right)}\right\rangle  &=    \left(-1\right)^{n+1}\frac{1}{\beta}\sum_{\omega}e^{i\omega 0^+}    \text{Tr}\left[E\left(\mathcal{G}V\right)^n\mathcal{G}-\left(V\mathcal{G}\right)^n\right]    \text{, for }n=1,2,\dots\end{align}</script><p>给出。</p><p>零温极限 $\beta\to\infty$下，能量期望值就是基态的能量特征值。而由于费米子具有Pauli不相容的性质，基态下费米子从最低能级开始向上填充，系统的基态能量等于各被填充能级能量特征值的加和。通过改变化学式 $\mu$ 可以改变系统费米子的个数，从而改变能级占据情况，根据系统基态能量的变化即可求出各能级的能量特征值。</p><h2 id="例：二阶微扰能级修正公式"><a href="#例：二阶微扰能级修正公式" class="headerlink" title="例：二阶微扰能级修正公式"></a>例：二阶微扰能级修正公式</h2><p>接下来我们来计算到二阶项的具体表达式。第 $0$ 阶也就是式 \eqref{eq:E_n_result} 中 $k=0$ 包含 $E$ 的那一项，我们得到</p><script type="math/tex; mode=display">    \begin{align}    \left\langle \hat{H}^{\left(0\right)}\right\rangle     &= -\frac{1}{\beta}\sum_{\omega}e^{i\omega 0^+}    \text{Tr}\left[E\mathcal{G}\right] \notag\\    &= -\frac{1}{\beta}\sum_{n}E_n\sum_{\omega}e^{i\omega 0^+}    \frac{1}{-i\omega+E_n-\mu} \notag \\     &=\sum_n E_n n_F\left(E_n\right)    \end{align}</script><p>取零温极限 $T\to0$ 可得</p><script type="math/tex; mode=display">\begin{align}    \left\langle \hat{H}^{\left(0\right)}\right\rangle \xrightarrow{\beta\to+\infty}\sum_{E_n<\mu}E_n\end{align}</script><p>计算 $1$ 阶项, 可得</p><script type="math/tex; mode=display">\begin{align}    \left\langle \hat{H}^{\left(1\right)}\right\rangle     &=\frac{1}{\beta}\sum_\omega    e^{i\omega 0^+}\text{Tr}\left[E\mathcal{G}V\mathcal{G}-V\mathcal{G}\right] \notag\\    &=\frac{1}{\beta}\sum_{\omega}e^{i\omega 0^+}\left(        \sum_m E_m\frac{1}{-i\omega+E_m-\mu}V_{mm}\frac{1}{-i\omega+E_m-\mu}        -\sum_m V_{mm}\frac{1}{-i\omega+E_m-\mu}    \right)\notag\\    &=\sum_m E_m V_{mm}\left[-\frac{\beta}{4}\text{ sech}\left(\frac{(E_m-\mu)\beta}{2}\right)^2\right]    +\sum_m V_{mm}n_F\left(E_m-\mu\right) \notag\\    &\xrightarrow{\beta\to+\infty} \sum_{E_n<\mu}V_{nn}\end{align}</script><p>计算 $2$ 阶项，有</p><script type="math/tex; mode=display">\begin{align}    \left\langle \hat{H}^{\left(2\right)}\right\rangle     =&-\frac{1}{\beta}\sum_{\omega}e^{i\omega 0^+}\text{Tr}    \left[E\mathcal{G}V\mathcal{G}V\mathcal{G}-V\mathcal{G}V\mathcal{G}\right] \notag \\    =&-\frac{1}{\beta}\sum_{\omega}e^{i\omega 0^+}     \left[\sum_{mn}E_mV_{mn}V_{nm}\mathcal{G}_m^2\mathcal{G}_n-\sum_{mn}V_{mn}V_{nm}\mathcal{G}_m\mathcal{G}_n\right]    \notag\\    =& \sum_{mn}E_{m}V_{mn}V_{nm}\left[\frac{\beta\text{ sech}\left(\frac{(E_m-\mu)\beta}{2}\right)^2}{4\left(E_n-E_m\right)}        + \frac{\tanh\left(\frac{(E_m-\mu)\beta}{2}\right)-\tanh\left(\frac{(E_n-\mu)\beta}{2}\right)}{2\left(E_m-E_n\right)^2}\right] \notag \\    &-\sum_{mn}V_{mn}V_{nm}\frac{\tanh\left(\frac{(E_m-\mu)\beta}{2}\right)    -\tanh\left(\frac{(E_n-\mu)\beta}{2}\right)}{2\left(E_m-E_n\right)} \notag \\    \xrightarrow{\beta\to+\infty}&    -\sum_{\substack{E_m>\mu\\E_n<\mu}}\frac{V_{mn}V_{nm}}{E_n-E_m} +2\sum_{\substack{E_m>\mu\\E_n<\mu}}\frac{V_{mn}V_{nm}}{E_n-E_m} \notag \\    =&\sum_{\substack{E_m>\mu\\E_n<\mu}}\frac{V_{mn}V_{nm}}{E_n-E_m} \end{align}</script><p>通过调整化学势 $\mu$ 的值，即可得到微扰下各能级的能量。</p>]]></content>
      
      
      <categories>
          
          <category> 量子场论 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 量子场论 </tag>
            
            <tag> 凝聚态场论 </tag>
            
            <tag> 量子力学 </tag>
            
            <tag> 微扰论 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
